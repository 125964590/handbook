<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>handbook</title>
    <link rel="stylesheet" type="text/css" href="../../css/main.css">
</head>
<body>
<div class="nav">
<div class="logo">handbook</div>
<ul><li><a href="../../index.html">Lua5.3</a></li><li><a href="../../html/git.html">git</a></li><li><a href="#"><span></span>测试工具</a><ul><li><a href="../../html/测试工具/chai.html">chai</a></li><li class="active"><a href="../../html/测试工具/mocha.html">mocha</a></li><li><a href="../../html/测试工具/should.html">should</a></li></ul></li></ul></div>


<div class="warpper">

    <div class="page-toc">
        <ul><li><a href="#Mocha">Mocha</a></li><li><a href="#如何安装">如何安装</a></li><li><a href="#断言">断言</a></li><li><a href="#同步执行的代码">同步执行的代码</a></li><li><a href="#异步执行的代码">异步执行的代码</a></li><li><a href="#挂起测试">挂起测试</a></li><li><a href="#独占测试">独占测试</a></li><li><a href="#包含测试">包含测试</a></li><li><a href="#差异检测">差异检测</a></li><li><a href="#命令行参数">命令行参数</a><ul><li><a href="#-w, --watch">-w, --watch</a></li><li><a href="#--compilers">--compilers</a></li><li><a href="#-b, --bail">-b, --bail</a></li><li><a href="#-d, --debug">-d, --debug</a></li><li><a href="#--globals ">--globals </a></li><li><a href="#--check-leaks">--check-leaks</a></li><li><a href="#-r, --require ">-r, --require </a></li><li><a href="#-u, --ui ">-u, --ui </a></li><li><a href="#-R, --reporter ">-R, --reporter </a></li><li><a href="#-t, --timeout ">-t, --timeout </a></li><li><a href="#-s, --slow ">-s, --slow </a></li><li><a href="#-g, --grep ">-g, --grep </a></li></ul></li><li><a href="#接口">接口</a><ul><li><a href="#BDD">BDD</a></li><li><a href="#TDD">TDD</a></li><li><a href="#Exports">Exports</a></li><li><a href="#QUnit">QUnit</a></li></ul></li><li><a href="#监控器">监控器</a><ul><li><a href="#Dot Matrix">Dot Matrix</a></li><li><a href="#Spec">Spec</a></li><li><a href="#Nyan">Nyan</a></li><li><a href="#TAP">TAP</a></li><li><a href="#Landing Strip">Landing Strip</a></li><li><a href="#List">List</a></li><li><a href="#Progress">Progress</a></li><li><a href="#JSON">JSON</a></li><li><a href="#JSON Stream">JSON Stream</a></li><li><a href="#JSONCov">JSONCov</a></li><li><a href="#HTMLCov">HTMLCov</a></li><li><a href="#Min">Min</a></li><li><a href="#Doc">Doc</a></li><li><a href="#XUnit">XUnit</a></li><li><a href="#TeamCity">TeamCity</a></li><li><a href="#Markdown">Markdown</a></li><li><a href="#HTML">HTML</a></li></ul></li><li><a href="#支持浏览器">支持浏览器</a><ul><li><a href="#grep">grep</a></li></ul></li><li><a href="#mocha.opts文件">mocha.opts文件</a></li><li><a href="#指定方案超时时间">指定方案超时时间</a></li><li><a href="#指定测试超时时间">指定测试超时时间</a></li><li><a href="#最佳实践">最佳实践</a><ul><li><a href="#test/*">test/*</a></li><li><a href="#Makefiles">Makefiles</a></li></ul></li><li><a href="#编辑器">编辑器</a><ul><li><a href="#TextMate bundle">TextMate bundle</a></li></ul></li><li><a href="#测试方案示例">测试方案示例</a></li><li><a href="#执行Mocha的测试">执行Mocha的测试</a></li></ul>
    </div>
    
    <div class="content markdown-body">
        <h2 id="Mocha">Mocha <a href="#Mocha"> # </a></h2>
<p>Mocha&#x662F;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E;node.js&#x548C;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x96C6;&#x5408;&#x5404;&#x79CD;&#x7279;&#x6027;&#x7684;Javascript&#x6D4B;&#x8BD5;&#x6846;&#x67B6;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x8BA9;&#x5F02;&#x6B65;&#x6D4B;&#x8BD5;&#x4E5F;&#x53D8;&#x7684;&#x7B80;&#x5355;&#x548C;&#x6709;&#x8DA3;&#x3002;Mocha&#x7684;&#x6D4B;&#x8BD5;&#x662F;&#x8FDE;&#x7EED;&#x7684;&#xFF0C;&#x5728;&#x6B63;&#x786E;&#x7684;&#x6D4B;&#x8BD5;&#x6761;&#x4EF6;&#x4E2D;&#x9047;&#x5230;&#x672A;&#x6355;&#x83B7;&#x7684;&#x5F02;&#x5E38;&#x65F6;&#xFF0C;&#x4F1A;&#x7ED9;&#x51FA;&#x7075;&#x6D3B;&#x4E14;&#x51C6;&#x786E;&#x7684;&#x62A5;&#x544A;&#x3002;Mocha&#x6258;&#x7BA1;&#x5728;Github&#x4E0A;&#x3002;</p>
<p><a href="http://www.ifeenan.com/javascript/2015-02-26-Mocha%E4%B8%AD%E6%96%87%E6%8C%87%E5%8D%97/">Mocha&#x4E2D;&#x6587;&#x6307;&#x5357;</a><br><a href="http://shouldjs.github.io/">should.js</a><br><a href="http://mochajs.org/">mocha&#x5B98;&#x65B9;&#x7F51;&#x7AD9;</a><br><a href="http://poppinlp.com/mochacn/">&#x4E0B;&#x6587;&#x7FFB;&#x8BD1;&#x6765;&#x6E90;</a></p>
<p><code>mocha</code>&#x662F;&#x4E00;&#x6B3E;&#x6BD4;&#x8F83;&#x6D41;&#x884C;&#x7684;&#x6D4B;&#x8BD5;&#x6846;&#x67B6;,&#x51FA;&#x81EA;<code>TJ</code>&#x4E4B;&#x624B;,&#x8DDF;<code>jasmine</code>&#x76F8;&#x6BD4;,&#x5B83;&#x6709;&#x7075;&#x6D3B;&#x7684;&#x65AD;&#x8A00;&#x8BED;&#x6CD5;,&#x6D4B;&#x8BD5;&#x63D0;&#x793A;&#x4E5F;&#x6BD4;&#x8F83;&#x53CB;&#x597D;,&#x5176;&#x5B83;&#x65B9;&#x9762;&#x8DDF;<code>jasmine</code>&#x7C7B;&#x4F3C;.</p>
<h1 id="&#x5982;&#x4F55;&#x5B89;&#x88C5;">&#x5982;&#x4F55;&#x5B89;&#x88C5; <a href="#&#x5982;&#x4F55;&#x5B89;&#x88C5;"> # </a></h1>
<p><code>$ npm install -g mocha</code> &#x901A;&#x8FC7;npm&#x6765;&#x5B89;&#x88C5;  </p>
<p>&#x4E00;&#x8D77;&#x6765;Mocha!</p>
<pre><code>$ npm install -g mocha
$ mkdir test
$ $EDITOR test/test.js

var assert = require(&quot;assert&quot;);
describe(&apos;Array&apos;, function() {
    describe(&apos;#indexOf()&apos;, function() {
        it(&apos;should return -1 when the value is not present&apos;, function() {
            assert.equal(-1, [1,2,3].indexOf(5));
            assert.equal(-1, [1,2,3].indexOf(0));
        });
    });
});

$  mocha

.

&#x2714; 1 test complete (1ms)
</code></pre><h1 id="&#x65AD;&#x8A00;">&#x65AD;&#x8A00; <a href="#&#x65AD;&#x8A00;"> # </a></h1>
<p>Mocha&#x5141;&#x8BB8;&#x4F60;&#x4F7F;&#x7528;&#x4EFB;&#x4F55;&#x4F60;&#x559C;&#x6B22;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x65AD;&#x8A00;&#x5E93;&#xFF0C;&#x53EA;&#x8981;&#x5B83;&#x80FD;&#x629B;&#x51FA;&#x9519;&#x8BEF;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x5C31;&#x80FD;&#x5DE5;&#x4F5C;&#xFF01;&#x4F8B;&#x5982;&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;should.js&#x3001;node&#x81EA;&#x5E26;&#x7684;assert&#x7B49;&#x7B49;&#x3002;&#x4E0B;&#x9762;&#x662F;&#x5E38;&#x89C1;node&#x6216;&#x8005;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x65AD;&#x8A00;&#x5E93;&#x5217;&#x8868;&#xFF1A; </p>
<ul>
<li><a href="https://github.com/visionmedia/should.js">should.js</a> BDD style shown throughout these docs  </li>
<li><a href="https://github.com/LearnBoost/expect.js">expect.js</a> expect() style assertions  </li>
<li><a href="http://chaijs.com/">chai</a> expect(), assert() and should style assertions  </li>
<li><a href="https://github.com/visionmedia/better-assert">better-assert</a> c-style self-documenting assert()  </li>
</ul>
<h1 id="&#x540C;&#x6B65;&#x6267;&#x884C;&#x7684;&#x4EE3;&#x7801;">&#x540C;&#x6B65;&#x6267;&#x884C;&#x7684;&#x4EE3;&#x7801; <a href="#&#x540C;&#x6B65;&#x6267;&#x884C;&#x7684;&#x4EE3;&#x7801;"> # </a></h1>
<p>&#x5F53;&#x6D4B;&#x8BD5;&#x540C;&#x6B65;&#x4EE3;&#x7801;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x5FFD;&#x7565;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;Mocha&#x4F1A;&#x81EA;&#x52A8;&#x7684;&#x8FDB;&#x884C;&#x4E0B;&#x4E00;&#x4E2A;&#x6D4B;&#x8BD5;&#x3002;</p>
<pre><code class="lang-js">describe(<span class="hljs-string">&apos;Array&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    describe(<span class="hljs-string">&apos;#indexOf()&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        it(<span class="hljs-string">&apos;should return -1 when the value is not present&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>].indexOf(<span class="hljs-number">5</span>).should.equal(-<span class="hljs-number">1</span>);
            [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>].indexOf(<span class="hljs-number">0</span>).should.equal(-<span class="hljs-number">1</span>);
        });
    });
});
</code></pre>
<h1 id="&#x5F02;&#x6B65;&#x6267;&#x884C;&#x7684;&#x4EE3;&#x7801;">&#x5F02;&#x6B65;&#x6267;&#x884C;&#x7684;&#x4EE3;&#x7801; <a href="#&#x5F02;&#x6B65;&#x6267;&#x884C;&#x7684;&#x4EE3;&#x7801;"> # </a></h1>
<p>&#x7528;Mocha&#x6765;&#x6D4B;&#x8BD5;&#x5F02;&#x6B65;&#x4EE3;&#x7801;&#x540C;&#x6837;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x5728;&#x4F60;&#x7684;&#x6D4B;&#x8BD5;&#x7ED3;&#x675F;&#x65F6;&#x8C03;&#x7528;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x5373;&#x53EF;&#x3002;&#x901A;&#x8FC7;&#x7ED9;it()&#x6DFB;&#x52A0;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF08;&#x901A;&#x5E38;&#x547D;&#x540D;&#x4E3A;done&#xFF09;&#x53EF;&#x4EE5;&#x544A;&#x77E5;Mocha&#x9700;&#x8981;&#x7B49;&#x5F85;&#x5F02;&#x6B65;&#x6D4B;&#x8BD5;&#x7ED3;&#x675F;&#x3002;</p>
<pre><code class="lang-js">describe(<span class="hljs-string">&apos;User&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    describe(<span class="hljs-string">&apos;#save()&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        it(<span class="hljs-string">&apos;should save without error&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">done</span>) </span>{
            <span class="hljs-keyword">var</span> user = <span class="hljs-keyword">new</span> User(<span class="hljs-string">&apos;Luna&apos;</span>);
            user.save(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
                <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
                done();
            });
        });
    });
});
</code></pre>
<p>&#x4E3A;&#x4E86;&#x66F4;&#x65B9;&#x4FBF;&#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x56DE;&#x8C03;&#x51FD;&#x6570;done()&#x652F;&#x6301;&#x63A5;&#x6536;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8FD9;&#x6837;&#x6765;&#x4F7F;&#x7528;&#x5B83;&#xFF1A;</p>
<pre><code class="lang-js">describe(<span class="hljs-string">&apos;User&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    describe(<span class="hljs-string">&apos;#save()&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        it(<span class="hljs-string">&apos;should save without error&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">done</span>) </span>{
            <span class="hljs-keyword">var</span> user = <span class="hljs-keyword">new</span> User(<span class="hljs-string">&apos;Luna&apos;</span>);
            user.save(done);
        });
    });
});
</code></pre>
<p>&#x6240;&#x6709;&#x7684;&#x94A9;&#x5B50;&#xFF08;before()&#x3001;after()&#x3001;beforeEach()&#x3001;afterEach()&#xFF09;&#x90FD;&#x540C;&#x65F6;&#x652F;&#x6301;&#x540C;&#x6B65;&#x548C;&#x5F02;&#x6B65;&#xFF0C;&#x884C;&#x4E3A;&#x8868;&#x73B0;&#x4E5F;&#x7C7B;&#x4F3C;&#x4E8E;&#x901A;&#x5E38;&#x7684;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#x3002;&#x4F8B;&#x5982;&#x53EF;&#x4EE5;&#x50CF;&#x4E0B;&#x9762;&#x8FD9;&#x6837;&#x5728;&#x6BCF;&#x4E2A;&#x6D4B;&#x8BD5;&#x4E4B;&#x524D;&#x521D;&#x59CB;&#x5316;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x865A;&#x62DF;&#x6570;&#x636E;&#xFF1A;</p>
<pre><code class="lang-js">describe(<span class="hljs-string">&apos;Connection&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> db = <span class="hljs-keyword">new</span> Connection,
        tobi = <span class="hljs-keyword">new</span> User(<span class="hljs-string">&apos;tobi&apos;</span>),
        loki = <span class="hljs-keyword">new</span> User(<span class="hljs-string">&apos;loki&apos;</span>),
        jane = <span class="hljs-keyword">new</span> User(<span class="hljs-string">&apos;jane&apos;</span>);

    beforeEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">done</span>) </span>{
        db.clear(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
            <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">return</span> done(err);
            db.save([tobi, loki, jane], done);
        });
    });

    describe(<span class="hljs-string">&apos;#find()&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        it(<span class="hljs-string">&apos;respond with matching records&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">done</span>) </span>{
            db.find({ type: <span class="hljs-string">&apos;User&apos;</span> }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, res</span>) </span>{
                <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">return</span> done(err);
                res.should.have.length(<span class="hljs-number">3</span>);
                done();
            });
        });
    });
});
</code></pre>
<p>&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;promise&#x6765;&#x4EE3;&#x66FF;&#x4F7F;&#x7528;&#x56DE;&#x8C03;&#x51FD;&#x6570;done()&#x3002;&#x5F53;&#x4F60;&#x6D4B;&#x8BD5;&#x7684;API&#x8FD4;&#x56DE;promise&#x800C;&#x4E0D;&#x662F;&#x6267;&#x884C;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x65F6;&#xFF0C;&#x8FD9;&#x5C06;&#x4F1A;&#x975E;&#x5E38;&#x597D;&#x7528;&#x3002;</p>
<pre><code class="lang-js">beforeEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> db.clear().then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> db.save([tobi, loki, jane]);
    });
});

describe(<span class="hljs-string">&apos;#find()&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    it(<span class="hljs-string">&apos;respond with matching records&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> db.find({ type: <span class="hljs-string">&apos;User&apos;</span> }).should.eventually.have.length(<span class="hljs-number">3</span>);
    });
});
</code></pre>
<p>&#xFF08;&#x4E0A;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x4F7F;&#x7528;&#x4E86;<a href="https://github.com/domenic/chai-as-promised/">Chai as Promised</a>&#x4F5C;&#x4E3A;promise&#x65AD;&#x8A00;&#x3002;&#xFF09;</p>
<p>&#x6CE8;&#x610F;&#xFF0C;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x4EFB;&#x610F;&#x6587;&#x4EF6;&#x4E2D;&#x52A0;&#x5165;&#x201C;&#x5168;&#x5C40;&#x201D;&#x7EA7;&#x522B;&#x7684;&#x94A9;&#x5B50;&#xFF0C;&#x4F8B;&#x5982;&#x5728;describe()&#x5916;&#x9762;&#x6DFB;&#x52A0;beforeEach()&#xFF0C;&#x8FD9;&#x6837;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x5C31;&#x4F1A;&#x5728;&#x6BCF;&#x4E00;&#x4E2A;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#x524D;&#x6267;&#x884C;&#x800C;&#x4E0D;&#x7BA1;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#x662F;&#x5426;&#x5728;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x4E2D;&#x3002;&#x4EA7;&#x751F;&#x8FD9;&#x6837;&#x7684;&#x7ED3;&#x679C;&#x662F;&#x56E0;&#x4E3A;Mocha&#x8FD0;&#x884C;&#x5728;&#x81EA;&#x5DF1;&#x7684;&#x5168;&#x5C40;&#x533F;&#x540D;Suite&#x4E2D;&#x3002;  </p>
<h1 id="&#x6302;&#x8D77;&#x6D4B;&#x8BD5;">&#x6302;&#x8D77;&#x6D4B;&#x8BD5; <a href="#&#x6302;&#x8D77;&#x6D4B;&#x8BD5;"> # </a></h1>
<p>&#x6302;&#x8D77;&#x7684;&#x6D4B;&#x8BD5;&#x662F;&#x6307;&#x90A3;&#x4E9B;&#x6CA1;&#x6709;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x7684;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#xFF1A;</p>
<pre><code class="lang-js">describe(<span class="hljs-string">&apos;Array&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    describe(<span class="hljs-string">&apos;#indexOf()&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        it(<span class="hljs-string">&apos;should return -1 when the value is not present&apos;</span>);
    });
});
</code></pre>
<h1 id="&#x72EC;&#x5360;&#x6D4B;&#x8BD5;">&#x72EC;&#x5360;&#x6D4B;&#x8BD5; <a href="#&#x72EC;&#x5360;&#x6D4B;&#x8BD5;"> # </a></h1>
<p>&#x72EC;&#x5360;&#x8FD9;&#x4E2A;&#x7279;&#x6027;&#x5141;&#x8BB8;&#x4F60;&#x50CF;&#x4E0B;&#x9762;&#x4F8B;&#x5B50;&#x90A3;&#x6837;&#x901A;&#x8FC7;&#x6DFB;&#x52A0;.only()&#x6765;&#x53EA;&#x6267;&#x884C;&#x6307;&#x5B9A;&#x7684;&#x6D4B;&#x8BD5;&#x573A;&#x666F;&#xFF1A;</p>
<pre><code class="lang-js">describe(<span class="hljs-string">&apos;Array&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    describe.only(<span class="hljs-string">&apos;#indexOf()&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        ...
    });
});
</code></pre>
<p>&#x6216;&#x8005;&#x6307;&#x5B9A;&#x7684;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#xFF1A;</p>
<pre><code class="lang-js">describe(<span class="hljs-string">&apos;Array&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    describe(<span class="hljs-string">&apos;#indexOf()&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        it.only(<span class="hljs-string">&apos;should return -1 unless present&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{

        });

        it(<span class="hljs-string">&apos;should return the index when present&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{

        });
    });
});
</code></pre>
<p>&#x6CE8;&#x610F;&#xFF0C;&#x76EE;&#x524D;&#x53EA;&#x8003;&#x8651;&#x4F7F;&#x7528;&#x6700;&#x591A;&#x4E00;&#x4E2A;.only()&#xFF0C;&#x8FD9;&#x80FD;&#x6709;&#x6548;&#x7684;&#x8FBE;&#x5230;--grep&#x7684;&#x6548;&#x679C;&#x3002;</p>
<h1 id="&#x5305;&#x542B;&#x6D4B;&#x8BD5;">&#x5305;&#x542B;&#x6D4B;&#x8BD5; <a href="#&#x5305;&#x542B;&#x6D4B;&#x8BD5;"> # </a></h1>
<p>&#x8FD9;&#x4E2A;&#x7279;&#x6027;&#x7C7B;&#x4F3C;&#x4E8E;.only&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6DFB;&#x52A0;.skip()&#x6765;&#x544A;&#x8BC9;Mocha&#x5FFD;&#x7565;&#x6389;&#x8FD9;&#x4E2A;&#x6D4B;&#x8BD5;&#x573A;&#x666F;&#x548C;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#x3002;&#x8FD9;&#x4F1A;&#x8BA9;&#x5B83;&#x4EEC;&#x88AB;&#x6302;&#x8D77;&#xFF0C;&#x6709;&#x52A9;&#x4E8E;&#x5728;&#x4F60;&#x5FD8;&#x8BB0;&#x53BB;&#x6389;&#x6CE8;&#x91CA;&#x7684;&#x65F6;&#x5019;&#x8DF3;&#x8FC7;&#x90A3;&#x4E9B;&#x6D4B;&#x8BD5;&#x3002;</p>
<pre><code class="lang-js">describe(<span class="hljs-string">&apos;Array&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    describe.skip(<span class="hljs-string">&apos;#indexOf()&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        ...
    });
});
</code></pre>
<p>&#x5BF9;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#x540C;&#x6837;&#x9002;&#x7528;&#xFF1A;</p>
<pre><code class="lang-js">describe(<span class="hljs-string">&apos;Array&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    describe(<span class="hljs-string">&apos;#indexOf()&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        it.skip(<span class="hljs-string">&apos;should return -1 unless present&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{

        })

        it(<span class="hljs-string">&apos;should return the index when present&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{

        });
    });
});
</code></pre>
<h1 id="&#x5DEE;&#x5F02;&#x68C0;&#x6D4B;">&#x5DEE;&#x5F02;&#x68C0;&#x6D4B; <a href="#&#x5DEE;&#x5F02;&#x68C0;&#x6D4B;"> # </a></h1>
<p>&#x5F53;&#x9700;&#x8981;&#x5411;&#x5F00;&#x53D1;&#x8005;&#x5448;&#x73B0;&#x5DEE;&#x5F02;&#x7684;&#x65F6;&#x5019;&#xFF0C;Mocha&#x652F;&#x6301;err.expected&#x548C;err.actual&#x5C5E;&#x6027;&#x3002;&#x76EE;&#x524D;Mocha&#x63D0;&#x4F9B;&#x4E86;&#x5B57;&#x7B26;&#x4E32;&#x5DEE;&#x5F02;&#xFF0C;&#x4EE5;&#x540E;&#x4F1A;&#x63D0;&#x4F9B;&#x5BF9;&#x8C61;&#x5DEE;&#x5F02;&#x548C;&#x5176;&#x4ED6;&#x7684;&#x5185;&#x5BB9;&#x3002;</p>
<h1 id="&#x547D;&#x4EE4;&#x884C;&#x53C2;&#x6570;">&#x547D;&#x4EE4;&#x884C;&#x53C2;&#x6570; <a href="#&#x547D;&#x4EE4;&#x884C;&#x53C2;&#x6570;"> # </a></h1>
<pre><code>Usage: mocha [debug] [options] [files]

Commands:

init &lt;path&gt;
initialize a client-side mocha setup at &lt;path&gt;

Options:

-h, --help                      &#x8F93;&#x51FA;&#x7528;&#x6CD5;&#x4FE1;&#x606F;
-V, --version                   &#x8F93;&#x51FA;&#x7248;&#x672C;&#x53F7;
-r, --require &lt;name&gt;            &#x52A0;&#x8F7D;&#x6307;&#x5B9A;&#x7684;&#x6A21;&#x5757;
-R, --reporter &lt;name&gt;           &#x6307;&#x5B9A;&#x4F7F;&#x7528;&#x7684;&#x76D1;&#x63A7;&#x5668;
-u, --ui &lt;name&gt;                 &#x6307;&#x5B9A;&#x4F7F;&#x7528;&#x7684;&#x63A5;&#x53E3;&#xFF08;bdd | tdd | exports&#xFF09;
-g, --grep &lt;pattern&gt;            &#x53EA;&#x6267;&#x884C;&#x6EE1;&#x8DB3;&#x8DEF;&#x5F84;&#x6A21;&#x5F0F;&#x7684;&#x6D4B;&#x8BD5;&#x811A;&#x672C;
-i, --invert                    inverts --grep matches
-t, --timeout &lt;ms&gt;              &#x8BBE;&#x7F6E;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#xFF0C;&#x5355;&#x4F4D;&#x6BEB;&#x79D2;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;2000
-s, --slow &lt;ms&gt;                 &quot;slow&quot; test threshold in milliseconds [75]
-w, --watch                     &#x76D1;&#x6D4B;&#x6709;&#x53D8;&#x5316;&#x7684;&#x6587;&#x4EF6;
-c, --colors                    &#x5F3A;&#x5236;&#x4F7F;&#x7528;&#x6587;&#x672C;&#x989C;&#x8272;
-C, --no-colors                 &#x5F3A;&#x5236;&#x5173;&#x95ED;&#x6587;&#x672C;&#x989C;&#x8272;
-G, --growl                     enable growl notification support
-d, --debug                     enable node&apos;s debugger, synonym for node --debug
-b, --bail                      bail after first test failure
-A, --async-only                force all tests to take a callback (async)
--recursive                     &#x5305;&#x542B;&#x5B50;&#x6587;&#x4EF6;&#x5939;
--debug-brk                     enable node&apos;s debugger breaking on the first line
--globals &lt;names&gt;               allow the given comma-delimited global [names]
--check-leaks                   check for global variable leaks
--interfaces                    &#x663E;&#x793A;&#x53EF;&#x7528;&#x7684;&#x63A5;&#x53E3;&#x5217;&#x8868;
--reporters                     &#x663E;&#x793A;&#x53EF;&#x7528;&#x7684;&#x76D1;&#x63A7;&#x5668;&#x5217;&#x8868;
--compilers &lt;ext&gt;:&lt;module&gt;,...  use the given module(s) to compile files
</code></pre><h2 id="-w, --watch">-w, --watch <a href="#-w, --watch"> # </a></h2>
<p>&#x5728;&#x5F53;&#x524D;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;&#x4E2D;&#x7684; Javascript &#x6587;&#x4EF6;&#x53D1;&#x751F;&#x6539;&#x53D8;&#x65F6;&#xFF0C;&#x7ACB;&#x5373;&#x6267;&#x884C;&#x76F8;&#x5E94;&#x7684;&#x6D4B;&#x8BD5;&#x3002;</p>
<h2 id="--compilers">--compilers <a href="#--compilers"> # </a></h2>
<p>coffee-script is no longer supported out of the box. CS and similar transpilers may be used by mapping the file extensions (for use with --watch) and the module name. For example --compilers coffee:coffee-script with CoffeeScript 1.6- or --compilers coffee:coffee-script/register with CoffeeScript 1.7+.</p>
<h2 id="-b, --bail">-b, --bail <a href="#-b, --bail"> # </a></h2>
<p>Only interested in the first exception? use --bail !</p>
<h2 id="-d, --debug">-d, --debug <a href="#-d, --debug"> # </a></h2>
<p>Enables node&apos;s debugger support, this executes your script(s) with node debug <file ...=""> allowing you to step through code and break with the debugger statement. Note the difference between mocha debug and mocha --debug: mocha debug will fire up node&apos;s built-in debug client, mocha --debug will allow you to use a different interface &#x2014; such as the Blink Developer Tools.</file></p>
<h2 id="--globals ">--globals  <a href="#--globals "> # </a></h2>
<p>Accepts a comma-delimited list of accepted global variable names. For example, suppose your app deliberately exposes a global named app and YUI, you may want to add --globals app,YUI. It also accepts wildcards. You could do --globals &apos;<em>bar&apos; and it would match foobar, barbar, etc. You can also simply pass in &apos;</em>&apos; to ignore all globals.</p>
<h2 id="--check-leaks">--check-leaks <a href="#--check-leaks"> # </a></h2>
<p>By default Mocha will not check for global variables leaked while running tests, to enable this pass --check-leaks, to specify globals that are acceptable use --globals, for example --globals jQuery,MyLib.</p>
<h2 id="-r, --require ">-r, --require  <a href="#-r, --require "> # </a></h2>
<p>The --require option is useful for libraries such as should.js, so you may simply --require should instead of manually invoking require(&apos;should&apos;) within each test file. Note that this works well for should as it augments Object.prototype, however if you wish to access a module&apos;s exports you will have to require them, for example var should = require(&apos;should&apos;).</p>
<h2 id="-u, --ui ">-u, --ui  <a href="#-u, --ui "> # </a></h2>
<p>The --ui option lets you specify the interface to use, defaulting to &quot;bdd&quot;.</p>
<h2 id="-R, --reporter ">-R, --reporter  <a href="#-R, --reporter "> # </a></h2>
<p>The --reporter option allows you to specify the reporter that will be used, defaulting to &quot;dot&quot;. This flag may also be used to utilize third-party reporters. For example if you npm install mocha-lcov-reporter you may then do --reporter mocha-lcov-reporter.</p>
<h2 id="-t, --timeout ">-t, --timeout  <a href="#-t, --timeout "> # </a></h2>
<p>Specifies the test-case timeout, defaulting to 2 seconds. To override you may pass the timeout in milliseconds, or a value with the s suffix, ex: --timeout 2s or --timeout 2000 would be equivalent.</p>
<h2 id="-s, --slow ">-s, --slow  <a href="#-s, --slow "> # </a></h2>
<p>Specify the &quot;slow&quot; test threshold, defaulting to 75ms. Mocha uses this to highlight test-cases that are taking too long.</p>
<h2 id="-g, --grep ">-g, --grep  <a href="#-g, --grep "> # </a></h2>
<p>The --grep option when specified will trigger mocha to only run tests matching the given pattern which is internally compiled to a RegExp.</p>
<p>Suppose for example you have &quot;api&quot; related tests, as well as &quot;app&quot; related tests, as shown in the following snippet; One could use --grep api or --grep app to run one or the other. The same goes for any other part of a suite or test-case title, --grep users would be valid as well, or even --grep GET.</p>
<h1 id="&#x63A5;&#x53E3;">&#x63A5;&#x53E3; <a href="#&#x63A5;&#x53E3;"> # </a></h1>
<p>Mocha&#x7684;&#x63A5;&#x53E3;&#x7CFB;&#x7EDF;&#x63D0;&#x4F9B;&#x4E86;BDD&#x3001;TDD&#x548C;exports&#x4E09;&#x79CD;&#x98CE;&#x683C;&#xFF0C;&#x5E76;&#x5141;&#x8BB8;&#x5F00;&#x53D1;&#x8005;&#x9009;&#x62E9;&#x4F7F;&#x7528;&#x3002;</p>
<h2 id="BDD">BDD <a href="#BDD"> # </a></h2>
<p>&quot;BDD&quot;&#x63A5;&#x53E3;&#x63D0;&#x4F9B;&#x4E86;describe()&#x3001;it()&#x3001;before()&#x3001;after()&#x3001;beforeEach()&#x548C;afterEach&#x53EF;&#x4F7F;&#x7528;&#x3002;</p>
<pre><code class="lang-js">describe(<span class="hljs-string">&apos;Array&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    before(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-comment">// ...</span>
    });

    describe(<span class="hljs-string">&apos;#indexOf()&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        it(<span class="hljs-string">&apos;should return -1 when not present&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>].indexOf(<span class="hljs-number">4</span>).should.equal(-<span class="hljs-number">1</span>);
        });
    });
});
</code></pre>
<h2 id="TDD">TDD <a href="#TDD"> # </a></h2>
<p>&quot;TDD&quot;&#x63A5;&#x53E3;&#x63D0;&#x4F9B;&#x4E86;suite()&#x3001;test()&#x3001;setup()&#x548C;teardown()&#x53EF;&#x4F7F;&#x7528;&#x3002;</p>
<pre><code class="lang-js">suite(<span class="hljs-string">&apos;Array&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    setup(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-comment">// ...</span>
    });

    suite(<span class="hljs-string">&apos;#indexOf()&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        test(<span class="hljs-string">&apos;should return -1 when not present&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            assert.equal(-<span class="hljs-number">1</span>, [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>].indexOf(<span class="hljs-number">4</span>));
        });
    });
});
</code></pre>
<h2 id="Exports">Exports <a href="#Exports"> # </a></h2>
<p>The &quot;exports&quot; interface is much like Mocha&apos;s predecessor expresso. The keys before, after, beforeEach, and afterEach are special-cased, object values are suites, and function values are test-cases.</p>
<pre><code class="lang-js"><span class="hljs-built_in">module</span>.exports = {
    before: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-comment">// ...</span>
    },

    <span class="hljs-string">&apos;Array&apos;</span>: {
        <span class="hljs-string">&apos;#indexOf()&apos;</span>: {
            <span class="hljs-string">&apos;should return -1 when not present&apos;</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>].indexOf(<span class="hljs-number">4</span>).should.equal(-<span class="hljs-number">1</span>);
            };
        };
    };
};
</code></pre>
<h2 id="QUnit">QUnit <a href="#QUnit"> # </a></h2>
<p>The qunit-inspired interface matches the &quot;flat&quot; look of QUnit where the test suite title is simply defined before the test-cases.</p>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ok</span>(<span class="hljs-params">expr, msg</span>) </span>{
    <span class="hljs-keyword">if</span> (!expr) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(msg);
}

suite(<span class="hljs-string">&apos;Array&apos;</span>);

test(<span class="hljs-string">&apos;#length&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> arr = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>];
    ok(arr.length == <span class="hljs-number">3</span>);
});

test(<span class="hljs-string">&apos;#indexOf()&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> arr = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>];
    ok(arr.indexOf(<span class="hljs-number">1</span>) == <span class="hljs-number">0</span>);
    ok(arr.indexOf(<span class="hljs-number">2</span>) == <span class="hljs-number">1</span>);
    ok(arr.indexOf(<span class="hljs-number">3</span>) == <span class="hljs-number">2</span>);
});

suite(<span class="hljs-string">&apos;String&apos;</span>);

test(<span class="hljs-string">&apos;#length&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    ok(<span class="hljs-string">&apos;foo&apos;</span>.length == <span class="hljs-number">3</span>);
});
</code></pre>
<p>Require</p>
<p>The require interface allows you to require the describe and friend words directly using require and call them whatever you want. This interface is also useful if you want to avoid global variables in your tests.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> testCase = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;mocha&apos;</span>).describe;
<span class="hljs-keyword">var</span> pre = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;mocha&apos;</span>).before;
<span class="hljs-keyword">var</span> assertions = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;mocha&apos;</span>).assertions;
<span class="hljs-keyword">var</span> assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;assert&apos;</span>);

testCase(<span class="hljs-string">&apos;Array&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    pre(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-comment">// ...</span>
    });

    testCase(<span class="hljs-string">&apos;#indexOf()&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        assertions(<span class="hljs-string">&apos;should return -1 when not present&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        assert.equal([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>].indexOf(<span class="hljs-number">4</span>), -<span class="hljs-number">1</span>);
        });
    });
});
</code></pre>
<h1 id="&#x76D1;&#x63A7;&#x5668;">&#x76D1;&#x63A7;&#x5668; <a href="#&#x76D1;&#x63A7;&#x5668;"> # </a></h1>
<p>Mocha &#x7684;&#x76D1;&#x63A7;&#x5668;&#x53EF;&#x4EE5;&#x9002;&#x5E94;&#x63A7;&#x5236;&#x53F0;&#x7A97;&#x53E3;&#xFF0C;&#x5E76;&#x4E14;&#x5F53;&#x6807;&#x51C6;&#x8F93;&#x5165;&#x6D41;&#x4E0D;&#x662F;&#x548C; tty &#x5173;&#x8054;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5B83;&#x603B;&#x662F;&#x4F1A;&#x7981;&#x7528; ansi-escape &#x7740;&#x8272;&#x3002;</p>
<h2 id="Dot Matrix">Dot Matrix <a href="#Dot Matrix"> # </a></h2>
<p>The &quot;dot&quot; matrix reporter is simply a series of dots that represent test cases, failures highlight in red, pending in blue, slow as yellow.</p>
<h2 id="Spec">Spec <a href="#Spec"> # </a></h2>
<p>The &quot;spec&quot; reporter outputs a hierarchical view nested just as the test cases are.</p>
<h2 id="Nyan">Nyan <a href="#Nyan"> # </a></h2>
<p>The &quot;nyan&quot; reporter is exactly what you might expect:</p>
<h2 id="TAP">TAP <a href="#TAP"> # </a></h2>
<p>The TAP reporter emits lines for a <a href="http://en.wikipedia.org/wiki/Test_Anything_Protocol">Test-Anything-Protocol</a> consumer.</p>
<h2 id="Landing Strip">Landing Strip <a href="#Landing Strip"> # </a></h2>
<p>The Landing Strip reporter is a gimmicky test reporter simulating a plane landing :) unicode ftw</p>
<h2 id="List">List <a href="#List"> # </a></h2>
<p>The &quot;List&quot; reporter outputs a simple specifications list as test cases pass or fail, outputting the failure details at the bottom of the output.</p>
<h2 id="Progress">Progress <a href="#Progress"> # </a></h2>
<p>The progress reporter implements a simple progress-bar:</p>
<h2 id="JSON">JSON <a href="#JSON"> # </a></h2>
<p>The JSON reporter outputs a single large JSON object when the tests have completed (failures or not).</p>
<h2 id="JSON Stream">JSON Stream <a href="#JSON Stream"> # </a></h2>
<p>The JSON Stream reporter outputs newline-delimited JSON &quot;events&quot; as they occur, beginning with a &quot;start&quot; event, followed by test passes or failures, and then the final &quot;end&quot; event.</p>
<h2 id="JSONCov">JSONCov <a href="#JSONCov"> # </a></h2>
<p>The JSONCov reporter is similar to the JSON reporter, however when run against a library instrumented by <a href="https://github.com/visionmedia/node-jscoverage">node-jscoverage</a> it will produce coverage output.</p>
<h2 id="HTMLCov">HTMLCov <a href="#HTMLCov"> # </a></h2>
<p>The HTMLCov reporter extends the JSONCov reporter. The library being tested should first be instrumented by <a href="https://github.com/visionmedia/node-jscoverage">node-jscoverage</a>, this allows Mocha to capture the coverage information necessary to produce a single-page HTML report.</p>
<p>Click to view the current <a href="http://poppinlp.com/mochacn/coverage.html">Express test coverage</a> report. For an integration example view the mocha test coverage support <a href="https://github.com/visionmedia/express/commit/b6ee5fafd0d6c79cf7df5560cb324ebee4fe3a7f">commit</a> for Express.</p>
<h2 id="Min">Min <a href="#Min"> # </a></h2>
<p>The &quot;min&quot; reporter displays the summary only, while still outputting errors on failure. This reporter works great with --watch as it clears the terminal in order to keep your test summary at the top.</p>
<h2 id="Doc">Doc <a href="#Doc"> # </a></h2>
<p>The &quot;doc&quot; reporter outputs a hierarchical HTML body representation of your tests, wrap it with a header, footer, some styling and you have some fantastic documentation!</p>
<p>For example suppose you have the following JavaScript:</p>
<pre><code class="lang-js">describe(<span class="hljs-string">&apos;Array&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    describe(<span class="hljs-string">&apos;#indexOf()&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        it(<span class="hljs-string">&apos;should return -1 when the value is not present&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>].indexOf(<span class="hljs-number">5</span>).should.equal(-<span class="hljs-number">1</span>);
            [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>].indexOf(<span class="hljs-number">0</span>).should.equal(-<span class="hljs-number">1</span>);
        });
    });
});
</code></pre>
<p>The command mocha --reporter doc array would yield:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">section</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">&quot;suite&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">h1</span>&gt;</span>Array<span class="hljs-tag">&lt;/<span class="hljs-title">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">dl</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">section</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">&quot;suite&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">h1</span>&gt;</span>#indexOf()<span class="hljs-tag">&lt;/<span class="hljs-title">h1</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">dl</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">dt</span>&gt;</span>should return -1 when the value is not present<span class="hljs-tag">&lt;/<span class="hljs-title">dt</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">dd</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">pre</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">code</span>&gt;</span>[1,2,3].indexOf(5).should.equal(-1); [1,2,3].indexOf(0).should.equal(-1);<span class="hljs-tag">&lt;/<span class="hljs-title">code</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">pre</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">dd</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">dl</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">section</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">dl</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">section</span>&gt;</span>
</code></pre>
<p>The SuperAgent request library test documentation was generated with Mocha&apos;s doc reporter using this simple make target:</p>
<pre><code>test-docs:
make test REPORTER=doc \
| cat docs/head.html - docs/tail.html \
&gt; docs/test.html
</code></pre><p>View the entire <a href="https://github.com/visionmedia/superagent/blob/master/Makefile">Makefile</a> for reference.</p>
<h2 id="XUnit">XUnit <a href="#XUnit"> # </a></h2>
<p>Documentation needed.</p>
<h2 id="TeamCity">TeamCity <a href="#TeamCity"> # </a></h2>
<p>Documentation needed.</p>
<h2 id="Markdown">Markdown <a href="#Markdown"> # </a></h2>
<p>The &quot;markdown&quot; reporter generates a markdown TOC and body for your test suite. This is great if you want to use the tests as documentation within a Github wiki page, or a markdown file in the repository that Github can render. For example here is the Connect <a href="https://github.com/senchalabs/connect/blob/90a725343c2945aaee637e799b1cd11e065b2bff/tests.md">test output</a>.</p>
<h2 id="HTML">HTML <a href="#HTML"> # </a></h2>
<p>The HTML reporter is currently the only browser reporter supported by Mocha, and it looks like this:</p>
<h1 id="&#x652F;&#x6301;&#x6D4F;&#x89C8;&#x5668;">&#x652F;&#x6301;&#x6D4F;&#x89C8;&#x5668; <a href="#&#x652F;&#x6301;&#x6D4F;&#x89C8;&#x5668;"> # </a></h1>
<p>Mocha&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x6267;&#x884C;&#x3002;&#x6BCF;&#x4E2A;Mocha&#x7684;&#x53D1;&#x884C;&#x7248;&#x4F1A;&#x4E3A;&#x6D4F;&#x89C8;&#x5668;&#x751F;&#x6210;&#x65B0;&#x7684;./mocha.js&#x548C;./mocha.css&#x3002;&#x53EA;&#x9700;&#x8981;&#x52A0;&#x8F7D;&#x76F8;&#x5E94;&#x7684;script&#x548C;stylesheet&#xFF0C;&#x5E76;&#x544A;&#x8BC9;Mocha&#x4F60;&#x5E0C;&#x671B;&#x4F7F;&#x7528;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x4F60;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;Mocha&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x6267;&#x884C;&#x6D4B;&#x8BD5;&#x3002;&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x4E2A;&#x5178;&#x578B;&#x7684;&#x4F7F;&#x7528;Mocha&#x7684;&#x6D4B;&#x8BD5;&#xFF0C;&#x5728;&#x52A0;&#x8F7D;&#x6D4B;&#x8BD5;&#x811A;&#x672C;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x8C03;&#x7528;mocha.setup(&apos;bdd&apos;)&#x6765;&#x4F7F;&#x7528;BDD&#x63A5;&#x53E3;&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7;mocha.run()&#x5728;onload&#x4E4B;&#x540E;&#x6267;&#x884C;&#x6D4B;&#x8BD5;&#x811A;&#x672C;&#x3002;</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">charset</span>=<span class="hljs-value">&quot;utf-8&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span>Mocha Tests<span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">&quot;stylesheet&quot;</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">&quot;mocha.css&quot;</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">&quot;mocha&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">&quot;jquery.js&quot;</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">&quot;expect.js&quot;</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">&quot;mocha.js&quot;</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="actionscript">mocha.setup(<span class="hljs-string">&apos;bdd&apos;</span>)</span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">&quot;test.array.js&quot;</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">&quot;test.object.js&quot;</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">&quot;test.xhr.js&quot;</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="actionscript">
            mocha.checkLeaks();
            mocha.globals([<span class="hljs-string">&apos;jQuery&apos;</span>]);
            mocha.run();
        </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span>
</code></pre>
<h2 id="grep">grep <a href="#grep"> # </a></h2>
<p>The client-side may utilize --grep as well, however you use the query-string, for example ?grep=api.</p>
<h1 id="mocha.opts&#x6587;&#x4EF6;">mocha.opts&#x6587;&#x4EF6; <a href="#mocha.opts&#x6587;&#x4EF6;"> # </a></h1>
<p>Mocha&#x4F1A;&#x5C1D;&#x8BD5;&#x53D6;&#x52A0;&#x8F7D;./test/mocha.opts&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x628A;&#x5B83;&#x4E0E;process.argv&#x8054;&#x7CFB;&#x8D77;&#x6765;&#xFF0C;&#x4F46;&#x547D;&#x4EE4;&#x884C;&#x53C2;&#x6570;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x66F4;&#x9AD8;&#x3002;&#x4F8B;&#x5982;&#x4F60;&#x6709;&#x4E0B;&#x9762;&#x8FD9;&#x6837;&#x7684;mocha.opts&#x6587;&#x4EF6;&#xFF1A;</p>
<pre><code>--require should
--reporter dot
--ui bdd
</code></pre><p>&#x8FD9;&#x4F1A;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;dot&#x76D1;&#x63A7;&#x5668;&#x3001;&#x52A0;&#x8F7D;should&#x5E93;&#x5E76;&#x4F7F;&#x7528;bdd&#x63A5;&#x53E3;&#x3002;&#x4E0E;&#x6B64;&#x540C;&#x65F6;&#xFF0C;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x8C03;&#x7528;mocha(1)&#x7684;&#x65F6;&#x5019;&#x6DFB;&#x52A0;&#x53C2;&#x6570;&#xFF0C;&#x6BD4;&#x5982;&#x4E0B;&#x9762;&#x8FD9;&#x6837;&#x4F1A;&#x6FC0;&#x6D3B;growl&#x652F;&#x6301;&#x5E76;&#x5C06;&#x76D1;&#x63A7;&#x5668;&#x8BBE;&#x7F6E;&#x4E3A;list&#xFF1A;</p>
<pre><code class="lang-sh">$ mocha --reporter list --growl
</code></pre>
<h1 id="&#x6307;&#x5B9A;&#x65B9;&#x6848;&#x8D85;&#x65F6;&#x65F6;&#x95F4;">&#x6307;&#x5B9A;&#x65B9;&#x6848;&#x8D85;&#x65F6;&#x65F6;&#x95F4; <a href="#&#x6307;&#x5B9A;&#x65B9;&#x6848;&#x8D85;&#x65F6;&#x65F6;&#x95F4;"> # </a></h1>
<p>&#x65B9;&#x6848;&#x7EA7;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x4F1A;&#x5BF9;&#x6574;&#x4E2A;&#x6D4B;&#x8BD5;&#x65B9;&#x6848;&#x751F;&#x6548;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;this.timeout(0)&#x6765;&#x5173;&#x95ED;&#x3002;&#x5982;&#x679C;&#x5176;&#x5185;&#x90E8;&#x7684;&#x6D4B;&#x8BD5;&#x65B9;&#x6848;&#x548C;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#x4E0D;&#x8986;&#x76D6;&#x8FD9;&#x4E2A;&#x503C;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x503C;&#x5C06;&#x88AB;&#x7EE7;&#x627F;&#x3002;</p>
<pre><code class="lang-js">describe(<span class="hljs-string">&apos;a suite of tests&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.timeout(<span class="hljs-number">500</span>);

    it(<span class="hljs-string">&apos;should take less than 500ms&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">done</span>) </span>{
        setTimeout(done, <span class="hljs-number">300</span>);
    });

    it(<span class="hljs-string">&apos;should take less than 500ms as well&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">done</span>) </span>{
        setTimeout(done, <span class="hljs-number">200</span>);
    });
});
</code></pre>
<h1 id="&#x6307;&#x5B9A;&#x6D4B;&#x8BD5;&#x8D85;&#x65F6;&#x65F6;&#x95F4;">&#x6307;&#x5B9A;&#x6D4B;&#x8BD5;&#x8D85;&#x65F6;&#x65F6;&#x95F4; <a href="#&#x6307;&#x5B9A;&#x6D4B;&#x8BD5;&#x8D85;&#x65F6;&#x65F6;&#x95F4;"> # </a></h1>
<p>&#x6D4B;&#x8BD5;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;this.timeout(0)&#x6765;&#x5173;&#x95ED;&#x6240;&#x6709;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#xFF1A;</p>
<pre><code>it(&apos;should take less than 500ms&apos;, function(done) {
    this.timeout(500);
    setTimeout(done, 300);
});
</code></pre><h1 id="&#x6700;&#x4F73;&#x5B9E;&#x8DF5;">&#x6700;&#x4F73;&#x5B9E;&#x8DF5; <a href="#&#x6700;&#x4F73;&#x5B9E;&#x8DF5;"> # </a></h1>
<h2 id="test/*">test/* <a href="#test/*"> # </a></h2>
<p>mocha(1)&#x9ED8;&#x8BA4;&#x4F1A;&#x4F7F;&#x7528;./test/*.js&#x8FD9;&#x4E2A;&#x8DEF;&#x5F84;&#x6A21;&#x5F0F;&#xFF0C;&#x8FD9;&#x4E5F;&#x901A;&#x5E38;&#x662F;&#x4F60;&#x653E;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#x7684;&#x597D;&#x5730;&#x65B9;&#x3002;</p>
<h2 id="Makefiles">Makefiles <a href="#Makefiles"> # </a></h2>
<p>&#x5BF9;&#x5F00;&#x53D1;&#x8005;&#x53CB;&#x597D;&#xFF0C;&#x5728;Makefile&#x4E2D;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;make test&#xFF0C;&#x4E0D;&#x8981;&#x8BA9;&#x4ED6;&#x4EEC;&#x5728;&#x4F60;&#x7684;&#x6587;&#x6863;&#x4E2D;&#x5230;&#x5904;&#x5BFB;&#x627E;&#x5982;&#x4F55;&#x8FD0;&#x884C;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#xFF1A;</p>
<pre><code>test:
./node_modules/.bin/mocha --reporter list

.PHONY: test
</code></pre><h1 id="&#x7F16;&#x8F91;&#x5668;">&#x7F16;&#x8F91;&#x5668; <a href="#&#x7F16;&#x8F91;&#x5668;"> # </a></h1>
<p>&#x4E0B;&#x9762;&#x662F;&#x53EF;&#x7528;&#x7684;&#x7F16;&#x8F91;&#x5668;&#x76F8;&#x5173;&#x7684;&#x5305;&#x5217;&#x8868;&#xFF1A;</p>
<h2 id="TextMate bundle">TextMate bundle <a href="#TextMate bundle"> # </a></h2>
<p>Mocha TextMate bundle &#x5305;&#x542B;&#x4E86;&#x8BA9;&#x5199;&#x6D4B;&#x8BD5;&#x66F4;&#x5FEB;&#x66F4;&#x8212;&#x5FC3;&#x7684;&#x5F88;&#x591A;snippets&#x3002;&#x6267;&#x884C;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#x5B89;&#x88C5;&#xFF1A;</p>
<pre><code>$ make tm
</code></pre><h1 id="&#x6D4B;&#x8BD5;&#x65B9;&#x6848;&#x793A;&#x4F8B;">&#x6D4B;&#x8BD5;&#x65B9;&#x6848;&#x793A;&#x4F8B; <a href="#&#x6D4B;&#x8BD5;&#x65B9;&#x6848;&#x793A;&#x4F8B;"> # </a></h1>
<p>&#x4E0B;&#x9762;&#x7684;&#x6D4B;&#x8BD5;&#x65B9;&#x6848;&#x662F;&#x6765;&#x81EA;&#x4E8E;&#x771F;&#x5B9E;&#x7684;&#x4F7F;&#x7528;Mocha&#x7684;&#x9879;&#x76EE;&#xFF0C;&#x6240;&#x4EE5;&#x7528;&#x5B83;&#x4EEC;&#x505A;&#x793A;&#x4F8B;&#x518D;&#x597D;&#x4E0D;&#x8FC7;&#x4E86;&#xFF1A;</p>
<ul>
<li><a href="https://github.com/visionmedia/express/tree/master/test">Express</a></li>
<li><a href="https://github.com/senchalabs/connect/tree/master/test">Connect</a></li>
<li><a href="https://github.com/visionmedia/superagent/tree/master/test/node">SuperAgent</a></li>
<li><a href="https://github.com/LearnBoost/websocket.io/tree/master/test">WebSocket.io</a></li>
<li><a href="https://github.com/visionmedia/mocha/tree/master/test">Mocha</a></li>
</ul>
<h1 id="&#x6267;&#x884C;Mocha&#x7684;&#x6D4B;&#x8BD5;">&#x6267;&#x884C;Mocha&#x7684;&#x6D4B;&#x8BD5; <a href="#&#x6267;&#x884C;Mocha&#x7684;&#x6D4B;&#x8BD5;"> # </a></h1>
<p>&#x6267;&#x884C;&#x6D4B;&#x8BD5;&#xFF1A;</p>
<pre><code class="lang-sh">$ make <span class="hljs-built_in">test</span>
</code></pre>
<p>&#x6267;&#x884C;&#x6240;&#x6709;&#x6D4B;&#x8BD5;&#xFF0C;&#x5305;&#x62EC;&#x63A5;&#x53E3;&#xFF1A;</p>
<pre><code class="lang-sh">$ make <span class="hljs-built_in">test</span>-all
</code></pre>
<p>&#x66F4;&#x6539;&#x76D1;&#x63A7;&#x5668;&#xFF1A;</p>
<pre><code class="lang-sh">$ make <span class="hljs-built_in">test</span> REPORTER=list
</code></pre>

        <div class="copyright">Powered by <a href="https://github.com/jaywcjlove/idoc" target="_blank">idoc</a>. Dependence <a href="https://nodejs.org">Node.js</a> run.</div>
    </div>
    
</div>


</body>
</html>
